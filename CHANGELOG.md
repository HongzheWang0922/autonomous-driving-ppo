# æ›´æ–°æ—¥å¿—

## [2.0.0] - 2024-01-15

### ğŸ‰ é‡å¤§æ›´æ–°ï¼šä»Highway-envè¿ç§»åˆ°SUMO

æœ¬ç‰ˆæœ¬å®Œå…¨é‡æ„äº†é¡¹ç›®ï¼Œä»highway-envç¯å¢ƒè¿ç§»åˆ°SUMOä»¿çœŸå™¨ï¼Œä½¿ç”¨çœŸå®è¡—é“åœ°å›¾è¿›è¡Œè®­ç»ƒã€‚

---

### âœ¨ æ–°å¢åŠŸèƒ½

#### æ ¸å¿ƒç¯å¢ƒ
- âœ… **SUMOç¯å¢ƒæ”¯æŒ** (`envs/sumo_env.py`)
  - åŸºäºSUMO 1.18+çš„è‡ªåŠ¨é©¾é©¶ç¯å¢ƒ
  - æ”¯æŒçœŸå®OpenStreetMapåœ°å›¾
  - 36ç»´è§‚æµ‹ç©ºé—´ï¼ˆegoçŠ¶æ€ã€å‘¨å›´è½¦è¾†ã€çº¢ç»¿ç¯ã€è·¯ç”±ï¼‰
  - è¿ç»­åŠ¨ä½œç©ºé—´ï¼ˆåŠ é€Ÿåº¦ã€è½¬å‘ï¼‰
  - å®Œæ•´çš„å¥–åŠ±å‡½æ•°ç³»ç»Ÿ

#### å››é˜¶æ®µè¯¾ç¨‹å­¦ä¹ 
- âœ… **Stage 1: ç©ºè·¯å¯¼èˆª**
  - æ— å…¶ä»–è½¦è¾†ï¼Œå­¦ä¹ åŸºç¡€é©¾é©¶
  - ç›®æ ‡ï¼š80%æˆåŠŸç‡
  
- âœ… **Stage 2: çº¢ç»¿ç¯éµå®ˆ**
  - å¼•å…¥çº¢ç»¿ç¯ç³»ç»Ÿ
  - å­¦ä¹ äº¤é€šè§„åˆ™
  - ç›®æ ‡ï¼š80%æˆåŠŸç‡ + ä½é—¯çº¢ç¯ç‡
  
- âœ… **Stage 3: åŠ¨æ€é¿éšœ**
  - 15è¾†èƒŒæ™¯è½¦è¾†
  - å­¦ä¹ è½¦è¾†äº¤äº’å’Œé¿éšœ
  - ç›®æ ‡ï¼š80%æˆåŠŸç‡ + ä½ç¢°æ’ç‡
  
- âœ… **Stage 4: ç»¼åˆåœºæ™¯**
  - 20è¾†è½¦è¾† + 10ä¸ªè¡Œäºº
  - é•¿è·ç¦»è·¯ç”±ï¼ˆ500-1500ç±³ï¼‰
  - å®Œæ•´çš„åŸå¸‚é©¾é©¶åœºæ™¯
  - ç›®æ ‡ï¼š80%æˆåŠŸç‡ + ç»¼åˆå®‰å…¨æ€§

#### LLMè®­ç»ƒé¡¾é—®
- âœ… **Gemini AIé›†æˆ** (`utils/llm_advisor.py`)
  - æ¯10000 episodeè‡ªåŠ¨åˆ†æè®­ç»ƒæ•°æ®
  - é—®é¢˜è¯Šæ–­å’Œä¼˜åŒ–å»ºè®®
  - å¥–åŠ±å‡½æ•°å’Œè¶…å‚æ•°è°ƒæ•´å»ºè®®
  - æ—¥å¿—ä¿å­˜åˆ° `outputs/llm_logs/`
  - æ¯å¤©æœ€å¤š200æ¬¡è°ƒç”¨é™åˆ¶
  - å¯é€‰å¯ç”¨ï¼ˆ`--llm --llm-api-key`ï¼‰

#### åœ°å›¾å·¥å…·
- âœ… **åœ°å›¾ä¸‹è½½è„šæœ¬** (`scripts/download_map.py`)
  - ä»OpenStreetMapä¸‹è½½çœŸå®è¡—é“æ•°æ®
  - è‡ªåŠ¨è½¬æ¢ä¸ºSUMOæ ¼å¼ï¼ˆnetconvertï¼‰
  - æ”¯æŒ3ä¸ªé¢„å®šä¹‰åŒºåŸŸï¼š
    - San Francisco Mission District
    - Manhattan SoHo
    - Manhattan Midtown
  - è‡ªåŠ¨ç”ŸæˆStage 1-4è·¯ç”±æ¨¡æ¿

#### è®­ç»ƒå’Œè¯„ä¼°
- âœ… **æ–°è®­ç»ƒè„šæœ¬** (`scripts/train_sumo.py`)
  - æ”¯æŒå››é˜¶æ®µè¯¾ç¨‹å­¦ä¹ 
  - è‡ªåŠ¨ä»å‰ä¸€é˜¶æ®µåŠ è½½æ¨¡å‹
  - é›†æˆLLMè®­ç»ƒé¡¾é—®
  - Episodeç»Ÿè®¡å’ŒTensorboardè®°å½•
  - å®šæœŸè¯„ä¼°å’ŒCheckpointä¿å­˜
  
- âœ… **æ–°è¯„ä¼°è„šæœ¬** (`scripts/evaluate_sumo.py`)
  - è¯¦ç»†çš„è¯„ä¼°æŒ‡æ ‡
  - æˆåŠŸç‡ã€ç¢°æ’ç‡ç»Ÿè®¡
  - çº¢ç»¿ç¯è¿è§„ç»Ÿè®¡
  - JSONæ ¼å¼ç»“æœå¯¼å‡º
  - å¯é€‰SUMO-GUIå¯è§†åŒ–

#### æ–‡æ¡£
- âœ… **å®Œæ•´é‡å†™README** (`README.md`)
  - å››é˜¶æ®µè®­ç»ƒè¯¦ç»†è¯´æ˜
  - LLMè®­ç»ƒé¡¾é—®ä½¿ç”¨æŒ‡å—
  - å®Œæ•´çš„å®‰è£…å’Œä½¿ç”¨è¯´æ˜
  - å¸¸è§é—®é¢˜è§£ç­”
  
- âœ… **å¿«é€Ÿå¼€å§‹æŒ‡å—** (`QUICKSTART.md`)
  - 30åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
  - ç®€åŒ–çš„å®‰è£…æ­¥éª¤
  
- âœ… **è¯¦ç»†å®‰è£…æŒ‡å—** (`INSTALL.md`)
  - è·¨å¹³å°å®‰è£…è¯´æ˜
  - æ•…éšœæ’é™¤
  
- âœ… **è¿ç§»æŒ‡å—** (`MIGRATION_GUIDE.md`)
  - Highway-envåˆ°SUMOçš„è¿ç§»è¯´æ˜
  - APIå˜åŒ–å¯¹æ¯”
  - æ—§ç‰ˆå…¼å®¹æ€§è¯´æ˜

---

### ğŸ”„ æ›´æ”¹

#### ä¾èµ–æ›´æ–°
- âœ… æ·»åŠ  `sumolib >= 1.18.0`
- âœ… æ·»åŠ  `traci >= 1.18.0`
- âœ… æ·»åŠ  `sumo-rl >= 1.4.0`
- âœ… æ·»åŠ  `google-generativeai >= 0.3.0` (LLMé¡¾é—®)
- âœ… æ›´æ–° `environment.yml`
- âœ… æ›´æ–° `pyproject.toml`
- âœ… æ–°å¢ `requirements.txt`

#### é…ç½®æ–‡ä»¶
- âœ… æ›´æ–° `.gitignore`
  - å¿½ç•¥SUMOä¸´æ—¶æ–‡ä»¶
  - å¿½ç•¥åœ°å›¾æ–‡ä»¶ï¼ˆéœ€å•ç‹¬ä¸‹è½½ï¼‰
  - å¿½ç•¥LLMæ—¥å¿—

---

### ğŸ—‘ï¸ å¼ƒç”¨

ä»¥ä¸‹æ–‡ä»¶ä¿ç•™ä½†æ ‡è®°ä¸ºå¼ƒç”¨ï¼š
- `envs/intersection_env.py` - Highway-envç¯å¢ƒ
- `scripts/train_multistage.py` - Highway-envè®­ç»ƒ
- `scripts/evaluate_local.py` - Highway-envè¯„ä¼°
- `scripts/visualize_local.py` - Highway-envå¯è§†åŒ–

**æ³¨æ„**: è¿™äº›æ–‡ä»¶ä»å¯ä½¿ç”¨ï¼Œä½†æ–°é¡¹ç›®åº”ä½¿ç”¨SUMOç‰ˆæœ¬ã€‚

---

### ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | v1.0 (Highway-env) | v2.0 (SUMO) |
|------|-------------------|-------------|
| ç¯å¢ƒ | Highway-env | SUMO |
| åœ°å›¾ | ç®€å•å‡ ä½• | çœŸå®è¡—é“ |
| è®­ç»ƒé˜¶æ®µ | 3 | 4 |
| å¹¶è¡Œç¯å¢ƒ | 24 | 8-16 |
| Stage 1æ—¶é—´ | ~4å°æ—¶ | ~8å°æ—¶ |
| æ€»è®­ç»ƒæ—¶é—´ | ~20å°æ—¶ | ~70å°æ—¶ |
| LLMè¾…åŠ© | âŒ | âœ… |
| çº¢ç»¿ç¯ | âŒ | âœ… |
| è¡Œäºº | âŒ | âœ… |
| çœŸå®åº¦ | â­â­ | â­â­â­â­â­ |

---

### ğŸ› ä¿®å¤

- âœ… è§£å†³Highway-envçš„Length=1 bugï¼ˆæ—§ç¯å¢ƒï¼‰
- âœ… æ”¹è¿›ç¢°æ’æ£€æµ‹é€»è¾‘
- âœ… ä¼˜åŒ–å¥–åŠ±å‡½æ•°å¹³è¡¡æ€§

---

### ğŸ“¦ æ–‡ä»¶ç»“æ„

```
æ–°å¢æ–‡ä»¶:
+ envs/sumo_env.py                 # SUMOç¯å¢ƒ
+ scripts/train_sumo.py            # SUMOè®­ç»ƒ
+ scripts/evaluate_sumo.py         # SUMOè¯„ä¼°
+ scripts/download_map.py          # åœ°å›¾ä¸‹è½½
+ utils/llm_advisor.py             # LLMé¡¾é—®
+ maps/                            # åœ°å›¾ç›®å½•
+ outputs/llm_logs/                # LLMæ—¥å¿—ç›®å½•
+ README.md                        # é‡å†™
+ QUICKSTART.md                    # æ–°å¢
+ INSTALL.md                       # æ–°å¢
+ MIGRATION_GUIDE.md               # æ–°å¢
+ CHANGELOG.md                     # æœ¬æ–‡ä»¶
+ requirements.txt                 # æ–°å¢
+ .gitignore                       # æ›´æ–°

ä¿ç•™ï¼ˆå¼ƒç”¨ï¼‰:
~ envs/intersection_env.py         # Highway-envç¯å¢ƒ
~ scripts/train_multistage.py      # æ—§è®­ç»ƒè„šæœ¬
~ scripts/evaluate_local.py        # æ—§è¯„ä¼°è„šæœ¬
~ scripts/visualize_local.py       # æ—§å¯è§†åŒ–è„šæœ¬
```

---

### ğŸš€ å‡çº§æŒ‡å—

ä»v1.0å‡çº§åˆ°v2.0ï¼š

1. **å®‰è£…SUMO**
   ```bash
   # å‚è€ƒ INSTALL.md
   ```

2. **æ›´æ–°Pythonä¾èµ–**
   ```bash
   conda env update -f environment.yml
   # æˆ–
   pip install -r requirements.txt
   ```

3. **ä¸‹è½½åœ°å›¾**
   ```bash
   python scripts/download_map.py --region sf_mission
   ```

4. **å¼€å§‹æ–°è®­ç»ƒ**
   ```bash
   python scripts/train_sumo.py --stage 1
   ```

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md)

---

### ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**: å‚è€ƒ [QUICKSTART.md](QUICKSTART.md)
2. **å®‰è£…é—®é¢˜**: å‚è€ƒ [INSTALL.md](INSTALL.md)
3. **ä»æ—§ç‰ˆè¿ç§»**: å‚è€ƒ [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md)
4. **å®Œæ•´æ–‡æ¡£**: å‚è€ƒ [README.md](README.md)

---

### ğŸ™ è‡´è°¢

- SUMOå›¢é˜Ÿæä¾›ä¼˜ç§€çš„äº¤é€šä»¿çœŸå¹³å°
- OpenStreetMapæä¾›å…è´¹åœ°å›¾æ•°æ®
- Google Geminiæä¾›LLM API
- Stable-Baselines3å›¢é˜Ÿç»´æŠ¤å¼ºåŒ–å­¦ä¹ åº“

---

## [1.0.0] - 2024-01-01

### åˆå§‹ç‰ˆæœ¬
- Highway-envç¯å¢ƒ
- PPOç®—æ³•è®­ç»ƒ
- 3é˜¶æ®µè®­ç»ƒï¼ˆeasy/medium/hardï¼‰
- åŸºç¡€è¯„ä¼°å’Œå¯è§†åŒ–

---

**å®Œæ•´æ›´æ–°å†…å®¹è¯·æŸ¥çœ‹**: [README.md](README.md)

